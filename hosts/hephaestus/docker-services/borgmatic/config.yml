location:
    # List of source directories to backup (required). Globs and tildes are expanded.
    source_directories:
      - /mnt/source

    repositories:
      - /mnt/borg-repository/

    # Any paths matching these patterns are excluded from backups. Globs and tildes
    # are expanded. See the output of "borg help patterns" for more details.
    exclude_patterns:
      - '*/cache/*'
      - '*/log/*'
      - '*/logs/*'

    # Exclude directories that contain a file with the given filenames. Defaults to not set.
    # exclude_if_present:
      # - .nobackup

storage:
  compression: "lzma,auto"

retention:
  keep_daily: 7
  keep_weekly: 4
  keep_monthly: 6
  keep_yearly: 1

consistency:
  # List of one or more consistency checks to run: "repository", "archives", "data",
  # and/or "extract". Defaults to "repository" and "archives". Set to "disabled" to
  # disable all consistency checks. "repository" checks the consistency of the
  # repository, "archives" checks all of the archives, "data" verifies the integrity
  # of the data within the archives, and "extract" does an extraction dry-run of the
  # most recent archive. Note that "data" implies "archives".
  checks:
    - repository
    - data

  # Restrict the number of checked archives to the last n. Applies only to the "archives" check. Defaults to checking all archives.
  check_last: 7

hooks:
  # List of one or more PostgreSQL databases to dump before creating a backup,
  # run once per configuration file. The database dumps are added to your source
  # directories at runtime, backed up, and then removed afterwards. Requires
  # pg_dump/pg_dumpall/pg_restore commands.
  # See https://www.postgresql.org/docs/current/app-pgdump.html for details.
  postgresql_databases:
    # Firefly
    - name: postgres
      hostname: firefly_db
      username: postgres
      password: firefly
    # Gitea
    - name: gitea
      hostname: gitea_db
      username: gitea
      password: gitea
    # Wiki.js
    - name: postgres
      hostname: wiki_db
      username: postgres
      password: wiki
    # Nextcloud
    - name: postgres
      hostname: nextcloud_db
      username: postgres
      password: nextcloud
